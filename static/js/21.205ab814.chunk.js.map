{"version":3,"sources":["views/Nft/market/Collections/index.tsx"],"names":["ITEMS_PER_PAGE","SORT_FIELD","PageButtons","styled","div","Arrow","theme","colors","primary","Collectible","t","useTranslation","collections","useGetCollections","isMobile","useMatchBreakpoints","useState","sortField","setSortField","sortDirection","setSortDirection","page","setPage","maxPage","setMaxPage","useEffect","extraPages","collectionValues","Object","values","length","Math","floor","sortedCollections","useMemo","sort","a","b","parseFloat","slice","handleSort","useCallback","newField","arrow","field","as","scale","color","textAlign","style","cursor","onClick","map","collection","volume","totalVolumeBNB","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","to","nftsBaseUrl","address","alignItems","src","avatar","width","height","mr","name","ml","numberTokensListed","totalSupply"],"mappings":"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","file":"static/js/21.205ab814.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react'\nimport {\n  Table,\n  Th,\n  Td,\n  Card,\n  Flex,\n  BnbUsdtPairTokenIcon,\n  Heading,\n  useMatchBreakpoints,\n  ProfileAvatar,\n  ArrowBackIcon,\n  Text,\n  ArrowForwardIcon,\n} from '@pancakeswap/uikit'\nimport styled from 'styled-components'\nimport { Link } from 'react-router-dom'\nimport { useGetCollections } from 'state/nftMarket/hooks'\nimport { useTranslation } from 'contexts/Localization'\nimport Page from 'components/Layout/Page'\nimport PageHeader from 'components/PageHeader'\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\n\nexport const ITEMS_PER_PAGE = 10\n\nconst SORT_FIELD = {\n  volumeBNB: 'totalVolumeBNB',\n  items: 'numberTokensListed',\n  supply: 'totalSupply',\n}\n\nexport const PageButtons = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 0.2em;\n  margin-bottom: 1.2em;\n`\n\nexport const Arrow = styled.div`\n  color: ${({ theme }) => theme.colors.primary};\n  padding: 0 20px;\n  :hover {\n    cursor: pointer;\n  }\n`\n\nconst Collectible = () => {\n  const { t } = useTranslation()\n  const collections = useGetCollections()\n  const { isMobile } = useMatchBreakpoints()\n  const [sortField, setSortField] = useState(null)\n  const [sortDirection, setSortDirection] = useState<boolean>(false)\n  const [page, setPage] = useState(1)\n  const [maxPage, setMaxPage] = useState(1)\n\n  useEffect(() => {\n    let extraPages = 1\n    const collectionValues = collections ? Object.values(collections) : []\n    if (collectionValues.length % ITEMS_PER_PAGE === 0) {\n      extraPages = 0\n    }\n    setMaxPage(Math.floor(collectionValues.length / ITEMS_PER_PAGE) + extraPages)\n  }, [collections])\n\n  const sortedCollections = useMemo(() => {\n    const collectionValues = collections ? Object.values(collections) : []\n\n    return collectionValues\n      .sort((a, b) => {\n        if (sortField && a && b) {\n          return parseFloat(a[sortField]) > parseFloat(b[sortField])\n            ? (sortDirection ? -1 : 1) * 1\n            : (sortDirection ? -1 : 1) * -1\n        }\n        return -1\n      })\n      .slice(ITEMS_PER_PAGE * (page - 1), page * ITEMS_PER_PAGE)\n  }, [page, collections, sortDirection, sortField])\n\n  const handleSort = useCallback(\n    (newField: string) => {\n      setSortField(newField)\n      setSortDirection(sortField !== newField ? true : !sortDirection)\n    },\n    [sortDirection, sortField],\n  )\n\n  const arrow = useCallback(\n    (field: string) => {\n      const directionArrow = !sortDirection ? '↑' : '↓'\n      return sortField === field ? directionArrow : ''\n    },\n    [sortDirection, sortField],\n  )\n\n  return (\n    <>\n      <PageHeader>\n        <Heading as=\"h1\" scale=\"xxl\" color=\"secondary\">\n          {t('Collections')}\n        </Heading>\n      </PageHeader>\n      <Page>\n        <Card>\n          <Table>\n            <thead>\n              <tr>\n                <Th textAlign=\"left\">{t('Collection')}</Th>\n                <Th textAlign=\"left\" style={{ cursor: 'pointer' }} onClick={() => handleSort(SORT_FIELD.volumeBNB)}>\n                  {t('Volume')}\n                  {arrow(SORT_FIELD.volumeBNB)}\n                </Th>\n                {!isMobile && (\n                  <>\n                    <Th textAlign=\"left\" style={{ cursor: 'pointer' }} onClick={() => handleSort(SORT_FIELD.items)}>\n                      {t('Items')}\n                      {arrow(SORT_FIELD.items)}\n                    </Th>\n                    <Th textAlign=\"left\" style={{ cursor: 'pointer' }} onClick={() => handleSort(SORT_FIELD.supply)}>\n                      {t('Supply')}\n                      {arrow(SORT_FIELD.supply)}\n                    </Th>\n                  </>\n                )}\n              </tr>\n            </thead>\n            <tbody>\n              {sortedCollections.map((collection) => {\n                const volume = collection.totalVolumeBNB\n                  ? parseFloat(collection.totalVolumeBNB).toLocaleString(undefined, {\n                      minimumFractionDigits: 3,\n                      maximumFractionDigits: 3,\n                    })\n                  : '0'\n                return (\n                  <tr key={collection.address}>\n                    <Td>\n                      <Link to={`${nftsBaseUrl}/collections/${collection.address}`}>\n                        <Flex alignItems=\"center\">\n                          <ProfileAvatar src={collection.avatar} width={48} height={48} mr=\"16px\" />\n                          {collection.name}\n                        </Flex>\n                      </Link>\n                    </Td>\n                    <Td>\n                      <Flex alignItems=\"center\">\n                        {volume}\n                        <BnbUsdtPairTokenIcon ml=\"8px\" />\n                      </Flex>\n                    </Td>\n                    {!isMobile && (\n                      <>\n                        <Td>{collection.numberTokensListed}</Td>\n                        <Td>{collection.totalSupply}</Td>\n                      </>\n                    )}\n                  </tr>\n                )\n              })}\n            </tbody>\n          </Table>\n          <PageButtons>\n            <Arrow\n              onClick={() => {\n                setPage(page === 1 ? page : page - 1)\n              }}\n            >\n              <ArrowBackIcon color={page === 1 ? 'textDisabled' : 'primary'} />\n            </Arrow>\n\n            <Text>{t('Page %page% of %maxPage%', { page, maxPage })}</Text>\n\n            <Arrow\n              onClick={() => {\n                setPage(page === maxPage ? page : page + 1)\n              }}\n            >\n              <ArrowForwardIcon color={page === maxPage ? 'textDisabled' : 'primary'} />\n            </Arrow>\n          </PageButtons>\n        </Card>\n      </Page>\n    </>\n  )\n}\n\nexport default Collectible\n"],"sourceRoot":""}